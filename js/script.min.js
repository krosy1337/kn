const $={};function noop(){}function _createModalFooter(o=[]){if(!o)return document.createElement("div");const e=document.createElement("div");return e.classList.add("modal__footer"),o.forEach(o=>{const s=document.createElement("button");s.textContent=o.text,s.classList.add("btn"),s.classList.add("btn-"+(o.type||"secondary")),s.addEventListener("click",o.handler||noop),e.appendChild(s)}),e}function _createModal(o){const e=document.createElement("div");e.classList.add("wmodal"),e.insertAdjacentHTML("afterbegin",`\n    <div class="modal__overlay" data-close="true">\n        <div class="modal__window" style="width: ${o.width||"600px"}">\n            <div class="modal__body" data-content>\n                ${o.content||""}\n            </div>\n        </div>\n    </div>\n    `);return _createModalFooter(o.footer).appendAfter(e.querySelector("[data-content]")),document.body.appendChild(e),e}Element.prototype.appendAfter=function(o){o.parentNode.insertBefore(this,o.nextSibling)},$.modal=function(o){const e=_createModal(o);let s=!1,a=!1;const n={open(){s||a||(e.classList.add("open"),document.body.style.overflow="hidden")},close(){s=!0,e.classList.remove("open"),e.classList.add("hide"),setTimeout(()=>{e.classList.remove("hide"),s=!1,document.body.style.overflow="visible","function"==typeof o.onClose&&o.onClose()},300)}},l=o=>{o.target.dataset.close&&n.close()};return e.addEventListener("click",l),Object.assign(n,{destroy(){e.parentNode.removeChild(e),e.removeEventListener("click",l),a=!0},setContent(o){e.querySelector("[data-content]").innerHTML=o}})};const board=document.querySelector(".board"),nowStep=document.querySelector(".now-step");let symbol="x";nowStep.innerHTML='\n    <h2 class="now-step__text">Сейчас ходят</h2>\n    <div class="board__symbol_x">\n        <span class="board__symbol_x-line"></span>\n        <span class="board__symbol_x-line"></span>\n    </div>\n';const getBoardSymbol=o=>board.querySelector(`.board__section:nth-child(${o})`).querySelector(".board__symbol").classList.value,closeHandler=()=>{board.innerHTML='\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <span class="board__line"></span>\n    ',modal.close(),board.addEventListener("click",boardClickHandler)},modal=$.modal({content:`\n        <h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>\n    `,footer:[{text:"Продолжить",handler(){board.innerHTML='\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <div class="board__section">\n            <span class="board__symbol"></span>\n        </div>\n        <span class="board__line"></span>\n    ',modal.close(),board.addEventListener("click",boardClickHandler)}}],width:"300px"}),showBoardLine=(o=0,e=-.1,s=0)=>{const a=document.querySelector(".board__line");a.style.top=100*o+"%",a.style.left=100*e+"%",a.style.transform=`translate(-${100*e}%, -${100*o}%)`,0!==s&&(a.style.transform=`rotate(${s}deg)`),45===s?a.style.width="170%":-45===s&&(a.style.top="108%",a.style.width="170%"),a.style.display="inline"},boardClickHandler=o=>{let e=o.target.closest(".board__section");if(e.classList.contains("board__section")&&!e.classList.contains("board__selection_active"))if(e.classList.add("board__selection_active"),e.querySelector(".board__symbol").classList.add("board__symbol_"+symbol),"x"===symbol?(e.querySelector(".board__symbol").innerHTML='\n                    <span class="board__symbol_x-line"></span>\n                    <span class="board__symbol_x-line"></span>\n                ',nowStep.innerHTML='\n                    <h2 class="now-step__text">Сейчас ходят</h2>\n                    <div class="board__symbol_0">\n                        <span class="board__symbol_0-circle"></span>\n                    </div>\n                ',symbol="0"):(e.querySelector(".board__symbol").innerHTML='\n                    <span class="board__symbol_0-circle"></span>\n                ',nowStep.innerHTML='\n                    <h2 class="now-step__text">Сейчас ходят</h2>\n                    <div class="board__symbol_x">\n                        <span class="board__symbol_x-line"></span>\n                        <span class="board__symbol_x-line"></span>\n                    </div>\n                ',symbol="x"),getBoardSymbol(1)===getBoardSymbol(2)&&getBoardSymbol(1)===getBoardSymbol(3)&&"board__symbol"!==getBoardSymbol(1))board.removeEventListener("click",boardClickHandler),showBoardLine(1/6),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(4)===getBoardSymbol(5)&&getBoardSymbol(4)===getBoardSymbol(6)&&"board__symbol"!==getBoardSymbol(4))board.removeEventListener("click",boardClickHandler),showBoardLine(.5),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(7)===getBoardSymbol(8)&&getBoardSymbol(7)===getBoardSymbol(9)&&"board__symbol"!==getBoardSymbol(7))board.removeEventListener("click",boardClickHandler),showBoardLine(5/6),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(1)===getBoardSymbol(4)&&getBoardSymbol(1)===getBoardSymbol(7)&&"board__symbol"!==getBoardSymbol(1))board.removeEventListener("click",boardClickHandler),showBoardLine(-.1,1/6,90),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(2)===getBoardSymbol(5)&&getBoardSymbol(2)===getBoardSymbol(8)&&"board__symbol"!==getBoardSymbol(2))board.removeEventListener("click",boardClickHandler),showBoardLine(-.1,.5,90),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(3)===getBoardSymbol(6)&&getBoardSymbol(3)===getBoardSymbol(9)&&"board__symbol"!==getBoardSymbol(3))board.removeEventListener("click",boardClickHandler),showBoardLine(-.1,5/6,90),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(1)===getBoardSymbol(5)&&getBoardSymbol(1)===getBoardSymbol(9)&&"board__symbol"!==getBoardSymbol(1))board.removeEventListener("click",boardClickHandler),showBoardLine(-.1,-.09,45),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else if(getBoardSymbol(7)===getBoardSymbol(5)&&getBoardSymbol(7)===getBoardSymbol(3)&&"board__symbol"!==getBoardSymbol(7))board.removeEventListener("click",boardClickHandler),showBoardLine(-.1,-.09,-45),modal.setContent(`<h3 class="modal__title">Победили ${"0"===symbol?"Крестики":"Нолики"}</h3>`),modal.open();else{const o=document.querySelectorAll(".board__symbol");let e=0;o.forEach(o=>{o.closest(".board__section").classList.contains("board__selection_active")||(e+=1)}),0===e&&(modal.setContent('<h3 class="modal__title">Ничья</h3>'),modal.open())}};board.addEventListener("click",boardClickHandler);